<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      th:include="layout :: page">
<body>
<div th:fragment="content">

    <div class="starter-template">
        <h1>See 5 latest condition in  room</h1>
    </div>

    <!--<div class="change-form">-->
    <!--<form action="#" th:action="#" th:object="#" method="post">-->
    <!--<p>Change tempreture : <input type="text" /></p>-->
    <!--<p>Change humidity: <input type="text"/></p>-->
    <!--<p>Change co2: <input type="text"/></p>&ndash;&gt;-->
    <!--<p>Save change<input type="submit" value="Submit" /></p>-->
    <!--</form>-->
    <!--</div>-->

    <div  id="conditions" class="list-conditions">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Temp</th>
                    <th>Hum</th>
                    <th>CO2</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="condition : *{conditions}">
                    <td th:text="*{condition.temp}"></td>
                    <td th:text="*{condition.hum}"></td>
                    <td th:text="*{condition.co2}"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <form  th:object="${suggestion}" method="POST">
        <input type="hidden" th:field="*{id}" />

        <div class="form-group">
            <label for="text">Add suggestion</label>
            <textarea class="form-control" id="text" th:field="*{text}"></textarea>
            <ul>
                <li th:each="err : ${#fields.errors('text')}" th:text="${err}"></li>
            </ul>
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit" class="btn btn-default"  >Save</button>
    </form>

    <div id="hidden-content">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Suggestions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="suggestion : *{suggestions}">
                <td th:text="*{suggestion.text}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div th:switch="${locationFlag.flag}">
        <p th:case="'Admin'">User is an administrator</p>
        <p th:case="*">User is some other thing</p>
    </div>

    <!--<script>-->
        <!--function toggle(el) {el.style.display = (el.style.display == 'none') ? '' : 'none'}-->
        <!--</script>-->
    <script>
        setInterval(function() {$("#conditions").load(condition.html);}, 300000)
    </script>
</div>

</body>
</html>